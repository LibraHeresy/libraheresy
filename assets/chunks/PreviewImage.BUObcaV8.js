var _=Object.defineProperty;var b=(s,n,c)=>n in s?_(s,n,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[n]=c;var l=(s,n,c)=>(b(s,typeof n!="symbol"?n+"":n,c),c);import{_ as B,h as d,C as M,o as k,c as U,m,a2 as L,b as $,a6 as F,a7 as N,Q as O,a8 as W,F as q}from"./framework.CGDvBAlC.js";const z=["src"],H=["id"],Q=["src"],V={__name:"PreviewImage",props:{imageUrl:String},setup(s){const n=s,c=d(!1),p=e=>{const t=document.getElementsByTagName("body")[0];e?(t.style.height="100vh",t.style.overflow="hidden",T()):(t.style.height="unset",t.style.overflow="auto"),c.value=e};class f{constructor(){l(this,"scale",1);l(this,"left","50%");l(this,"top","50%");l(this,"translate","")}}const o=d(new f),P=e=>{const{deltaY:t}=e;let{scale:a}=o.value;t>0?(a-=.2,a<.2&&(a=.2)):t<0&&(a+=.2),o.value.scale=a};class y{constructor(){l(this,"x",0);l(this,"y",0)}}class w{constructor(){l(this,"x",document.body.clientWidth/2);l(this,"y",document.body.clientHeight/2)}}const r=d(new y),i=d(new w),x=(e,t)=>{r.value.x=e,r.value.y=t},E=(e,t)=>{const{x:a,y:u}=r.value;o.value.translate=`${e-a}px ${t-u}px`},g=(e,t)=>{S(e,t),o.value.translate=""},S=(e,t)=>{i.value.x=i.value.x-r.value.x+e,i.value.y=i.value.y-r.value.y+t,o.value.left=`${i.value.x}px`,o.value.top=`${i.value.y}px`},T=()=>{r.value=new y,i.value=new w,o.value=new f},h=d(0),X=e=>{if(e.touches.length===1){const{pageX:t,pageY:a}=e.touches[0];x(t,a)}e.touches.length===2&&(h.value=Y(e.touches[0],e.touches[1]))};let v=d(null);const C=e=>{if(e.preventDefault(),e.touches.length===1){const{pageX:t,pageY:a}=e.touches[0];E(t,a)}if(e.touches.length===2){const t=Y(e.touches[0],e.touches[1]),a=t/h.value;o.value.scale*=a,h.value=t}v&&clearTimeout(v),v=setTimeout(()=>{D(e)},200)},D=e=>{if(e.touches.length===1){const{pageX:t,pageY:a}=e.touches[0];g(t,a)}if(e.touches.length===2){const t=e.touches[0],a=e.touches[1],u=(t.pageX+a.pageX)/2,I=(t.pageY+a.pageY)/2;g(u,I)}},Y=(e,t)=>{const a=e.pageX-t.pageX,u=e.pageY-t.pageY;return Math.sqrt(a*a+u*u)};return M(()=>{const e=document.getElementById(n.imageUrl);e.addEventListener("wheel",P),e.addEventListener("dragstart",({clientX:t,clientY:a})=>x(t,a)),e.addEventListener("drag",({clientX:t,clientY:a})=>E(t,a)),e.addEventListener("dragend",({clientX:t,clientY:a})=>g(t,a)),e.addEventListener("dragover",t=>t.preventDefault()),e.addEventListener("touchstart",X),e.addEventListener("touchmove",C),e.addEventListener("touchend",D)}),(e,t)=>(k(),U(q,null,[m("img",{class:"frame-img",src:s.imageUrl,onClick:t[0]||(t[0]=L(()=>p(!0),["stop"]))},null,8,z),(k(),$(W,{to:"body"},[F(m("div",{id:s.imageUrl,class:"preview-img-mask",onClick:t[1]||(t[1]=L(()=>p(!1),["stop"]))},[m("img",{class:"preview-img",style:O(o.value),src:s.imageUrl},null,12,Q)],8,H),[[N,c.value]])]))],64))}},G=B(V,[["__scopeId","data-v-3c9e8795"]]);export{G as P};
