var M=Object.defineProperty;var T=(s,n,c)=>n in s?M(s,n,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[n]=c;var o=(s,n,c)=>(T(s,typeof n!="symbol"?n+"":n,c),c);import{_ as U,h as r,C as Y,o as k,c as X,m as y,a2 as L,b as $,a6 as F,a7 as N,Q as O,a8 as W,F as q}from"./framework.CGDvBAlC.js";const z=["src"],H=["id"],Q=["src"],V={__name:"PreviewImage",props:{imageUrl:String},setup(s){const n=s,c=r(!1),p=e=>{const t=document.getElementsByTagName("body")[0];e?(t.style.height="100vh",t.style.overflow="hidden",I()):(t.style.height="unset",t.style.overflow="auto"),c.value=e};class w{constructor(){o(this,"scale",1);o(this,"left","50%");o(this,"top","50%");o(this,"translate","")}}const l=r(new w),S=e=>{const{deltaY:t}=e;let{scale:a}=l.value;t>0?(a-=.2,a<.2&&(a=.2)):t<0&&(a+=.2),l.value.scale=a};class x{constructor(){o(this,"x",0);o(this,"y",0)}}class d{constructor(){o(this,"x",document.body.clientWidth/2);o(this,"y",document.body.clientHeight/2)}}const u=r(new x),i=r(new d),E=(e,t)=>{u.value.x=e,u.value.y=t},D=(e,t)=>{const{x:a,y:g}=u.value;l.value.translate=`${e-a}px ${t-g}px`},m=(e,t)=>{C(e,t),l.value.translate=""},C=(e,t)=>{i.value.x=i.value.x-u.value.x+e,i.value.y=i.value.y-u.value.y+t,l.value.left=`${i.value.x}px`,l.value.top=`${i.value.y}px`},I=()=>{u.value=new x,i.value=new d,l.value=new w,f.value=!0,v.value=new d,h.value=0};let f=r(!0),v=r(new d),h=r(0);const _=e=>{if(e.touches.length===1){const{clientX:t,clientY:a}=e.touches[0];f.value||m(v.value.x,v.value.y),f.value=!1,E(t,a),console.log("one touch start",t,a)}e.touches.length===2&&(h.value=P(e.touches[0],e.touches[1]))},b=e=>{if(e.preventDefault(),e.touches.length===1){const{clientX:t,clientY:a}=e.touches[0];D(t,a),v.value.x=t,v.value.y=a,console.log("one touch move",t,a)}if(e.touches.length===2){const t=P(e.touches[0],e.touches[1]),a=t/h.value;l.value.scale*=a,h.value=t}},B=e=>{if(e.touches.length===1){const{clientX:t,clientY:a}=e.touches[0];m(t,a),console.log("one touch end",t,a)}},P=(e,t)=>{const a=e.clientX-t.clientX,g=e.clientY-t.clientY;return Math.sqrt(a*a+g*g)};return Y(()=>{const e=document.getElementById(n.imageUrl);e.addEventListener("wheel",S),e.addEventListener("dragstart",({clientX:t,clientY:a})=>E(t,a)),e.addEventListener("drag",({clientX:t,clientY:a})=>D(t,a)),e.addEventListener("dragend",({clientX:t,clientY:a})=>m(t,a)),e.addEventListener("dragover",t=>t.preventDefault()),e.addEventListener("touchstart",_,{passive:!1}),e.addEventListener("touchmove",b,{passive:!1}),e.addEventListener("touchend",B,{passive:!1})}),(e,t)=>(k(),X(q,null,[y("img",{class:"frame-img",src:s.imageUrl,onClick:t[0]||(t[0]=L(()=>p(!0),["stop"]))},null,8,z),(k(),$(W,{to:"body"},[F(y("div",{id:s.imageUrl,class:"preview-img-mask",onClick:t[1]||(t[1]=L(()=>p(!1),["stop"]))},[y("img",{class:"preview-img",style:O(l.value),src:s.imageUrl},null,12,Q)],8,H),[[N,c.value]])]))],64))}},G=U(V,[["__scopeId","data-v-525f437c"]]);export{G as P};
