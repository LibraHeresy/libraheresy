var S=Object.defineProperty;var _=(a,s,c)=>s in a?S(a,s,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[s]=c;var o=(a,s,c)=>(_(a,typeof s!="symbol"?s+"":s,c),c);import{_ as U,h as d,C as Y,o as P,c as X,m as g,a2 as M,b as $,a6 as A,a7 as F,Q as O,a8 as N,F as W}from"./framework.DVBdlveE.js";const q=["src"],z=["id"],H=["src"],Q={__name:"PreviewImage",props:{imageUrl:String},setup(a){const s=a,c=d(!1),m=e=>{const t=document.getElementsByTagName("body")[0];e?(t.style.height="100vh",t.style.overflow="hidden",T()):(t.style.height="unset",t.style.overflow="auto"),c.value=e};class y{constructor(){o(this,"scale",1);o(this,"left","50%");o(this,"top","50%");o(this,"translate","")}}const l=d(new y),b=e=>{const{deltaY:t}=e;let{scale:n}=l.value;t>0?(n-=.2,n<.2&&(n=.2)):t<0&&(n+=.2),l.value.scale=n};class f{constructor(){o(this,"x",0);o(this,"y",0)}}class p{constructor(){o(this,"x",document.body.clientWidth/2);o(this,"y",document.body.clientHeight/2)}}const r=d(new f),i=d(new p),w=e=>{const{clientX:t,clientY:n}=e;r.value.x=t,r.value.y=n},x=e=>{const{clientX:t,clientY:n}=e;k(t,n),l.value.translate=""},E=e=>{const{clientX:t,clientY:n}=e,{x:v,y:L}=r.value;l.value.translate=`${t-v}px ${n-L}px`},k=(e,t)=>{i.value.x=i.value.x-r.value.x+e,i.value.y=i.value.y-r.value.y+t,l.value.left=`${i.value.x}px`,l.value.top=`${i.value.y}px`},T=()=>{r.value=new f,i.value=new p,l.value=new y},u=d(0),B=e=>{console.log("touchstart",e),e.touches.length===1&&(w(e.touches[0]),u.value=0),e.touches.length===2&&(u.value=D(e.touches[0],e.touches[1]))},C=e=>{if(e.preventDefault(),console.log("touchmove",e),e.touches.length===1&&E(e.touches[0]),e.touches.length===2){const t=D(e.touches[0],e.touches[1]),n=t/u.value;l.value.scale*=n,u.value=t}},I=e=>{console.log("touchend",e),e.changedTouches.length===1&&!u.value&&x(e.changedTouches[0])},D=(e,t)=>{const n=e.clientX-t.clientX,v=e.clientY-t.clientY;return Math.sqrt(n*n+v*v)},h=d(!1);return(()=>{const e=navigator.userAgent||navigator.vendor||window.opera;h.value=/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e),h.value?console.log("这是一个移动设备"):console.log("这是一个PC或桌面设备")})(),Y(()=>{const e=document.getElementById(s.imageUrl);h.value?(e.addEventListener("touchstart",B),e.addEventListener("touchmove",C),e.addEventListener("touchend",I)):(e.addEventListener("wheel",b),e.addEventListener("dragstart",w),e.addEventListener("drag",E),e.addEventListener("dragend",x),e.addEventListener("dragover",t=>t.preventDefault()))}),(e,t)=>(P(),X(W,null,[g("img",{class:"frame-img",src:a.imageUrl,onClick:t[0]||(t[0]=M(()=>m(!0),["stop"]))},null,8,q),(P(),$(N,{to:"body"},[A(g("div",{id:a.imageUrl,class:"preview-img-mask",onClick:t[1]||(t[1]=M(()=>m(!1),["stop"]))},[g("img",{class:"preview-img",style:O(l.value),src:a.imageUrl},null,12,H)],8,z),[[F,c.value]])]))],64))}},J=U(Q,[["__scopeId","data-v-04884cee"]]);export{J as P};
