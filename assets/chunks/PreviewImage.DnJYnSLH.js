var T=Object.defineProperty;var _=(n,s,l)=>s in n?T(n,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[s]=l;var o=(n,s,l)=>(_(n,typeof s!="symbol"?s+"":s,l),l);import{_ as U,h as r,C as Y,o as P,c as $,m as g,a2 as b,b as A,a6 as O,a7 as X,Q as F,a8 as N,F as W}from"./framework.DVBdlveE.js";const z=["src"],H=["id"],Q=["src"],V={__name:"PreviewImage",props:{imageUrl:String},setup(n){const s=n,l=r(!1),h=e=>{const t=document.getElementsByTagName("body")[0];e?(t.style.height="100vh",t.style.overflow="hidden",D()):(t.style.height="unset",t.style.overflow="auto"),l.value=e};class m{constructor(){o(this,"scale",1);o(this,"left","50%");o(this,"top","50%");o(this,"translate","")}}const c=r(new m),M=e=>{const{deltaY:t}=e;let{scale:a}=c.value;t>0?(a-=.2,a<.2&&(a=.2)):t<0&&(a+=.2),c.value.scale=a};class y{constructor(){o(this,"x",0);o(this,"y",0)}}class f{constructor(){o(this,"x",document.body.clientWidth/2);o(this,"y",document.body.clientHeight/2)}}const d=r(new y),i=r(new f),p=e=>{const{clientX:t,clientY:a}=e;d.value.x=t,d.value.y=a},w=e=>{const{clientX:t,clientY:a}=e;k(t,a),c.value.translate=""},E=e=>{const{clientX:t,clientY:a}=e,{x:L,y:S}=d.value;c.value.translate=`${t-L}px ${a-S}px`},k=(e,t)=>{i.value.x=i.value.x-d.value.x+e,i.value.y=i.value.y-d.value.y+t,c.value.left=`${i.value.x}px`,c.value.top=`${i.value.y}px`},D=()=>{d.value=new y,i.value=new f,c.value=new m},x=r({}),u=r(!1),B=e=>{console.log("touchstart",e),e.touches.length===1&&p(e.touches[0])},C=e=>{console.log("touchmove",e),e.touches.length===1&&(E(e.touches[0]),x.value=e.touches[0],u.value=!0)},I=e=>{console.log("touchend",e),u.value&&(w(x.value),u.value=!1)},v=r(!1);return(()=>{const e=navigator.userAgent||navigator.vendor||window.opera;v.value=/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e),v.value?console.log("这是一个移动设备"):console.log("这是一个PC或桌面设备")})(),Y(()=>{const e=document.getElementById(s.imageUrl);v.value?(e.addEventListener("touchstart",B),e.addEventListener("touchmove",C),e.addEventListener("touchend",I)):(e.addEventListener("wheel",M),e.addEventListener("dragstart",p),e.addEventListener("drag",E),e.addEventListener("dragend",w),e.addEventListener("dragover",t=>t.preventDefault()))}),(e,t)=>(P(),$(W,null,[g("img",{class:"frame-img",src:n.imageUrl,onClick:t[0]||(t[0]=b(()=>h(!0),["stop"]))},null,8,z),(P(),A(N,{to:"body"},[O(g("div",{id:n.imageUrl,class:"preview-img-mask",onClick:t[1]||(t[1]=b(()=>h(!1),["stop"]))},[g("img",{class:"preview-img",style:F(c.value),src:n.imageUrl},null,12,Q)],8,H),[[X,l.value]])]))],64))}},J=U(V,[["__scopeId","data-v-aa7a2b19"]]);export{J as P};
