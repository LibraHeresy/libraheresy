var _=Object.defineProperty;var B=(n,s,o)=>s in n?_(n,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[s]=o;var l=(n,s,o)=>(B(n,typeof s!="symbol"?s+"":s,o),o);import{_ as U,h as d,C as M,o as x,c as T,m as u,a2 as E,b as Y,a6 as $,a7 as X,Q as F,a8 as N,F as O}from"./framework.DVBdlveE.js";const W=["src"],z=["id"],H=["src"],Q={__name:"PreviewImage",props:{imageUrl:String},setup(n){const s=n,o=d(!1),v=e=>{const t=document.getElementsByTagName("body")[0];e?(t.style.height="100vh",t.style.overflow="hidden",L()):(t.style.height="unset",t.style.overflow="auto"),o.value=e};class h{constructor(){l(this,"scale",1);l(this,"left","50%");l(this,"top","50%");l(this,"translate","")}}const c=d(new h),P=e=>{const{deltaY:t}=e;let{scale:a}=c.value;t>0?(a-=.2,a<.2&&(a=.2)):t<0&&(a+=.2),c.value.scale=a};class g{constructor(){l(this,"x",0);l(this,"y",0)}}class m{constructor(){l(this,"x",document.body.clientWidth/2);l(this,"y",document.body.clientHeight/2)}}const r=d(new g),i=d(new m),y=e=>{const{clientX:t,clientY:a}=e;r.value.x=t,r.value.y=a},f=e=>{const{clientX:t,clientY:a}=e;k(t,a),c.value.translate=""},p=e=>{const{clientX:t,clientY:a}=e,{x:D,y:I}=r.value;c.value.translate=`${t-D}px ${a-I}px`},k=(e,t)=>{i.value.x=i.value.x-r.value.x+e,i.value.y=i.value.y-r.value.y+t,c.value.left=`${i.value.x}px`,c.value.top=`${i.value.y}px`},L=()=>{r.value=new g,i.value=new m,c.value=new h},w=d({}),S=e=>{console.log("touchstart",e),e.touches.length===1&&y(e.touches[0])},b=e=>{console.log("touchmove",e),e.touches.length===1&&(p(e.touches[0]),w.value=e.touches[0])},C=e=>{console.log("touchend",e),f(w.value)};return M(()=>{const e=document.getElementById(s.imageUrl);e.addEventListener("wheel",P),e.addEventListener("dragstart",y),e.addEventListener("drag",p),e.addEventListener("dragend",f),e.addEventListener("dragover",t=>t.preventDefault()),e.addEventListener("touchstart",S),e.addEventListener("touchmove",b),e.addEventListener("touchend",C)}),(e,t)=>(x(),T(O,null,[u("img",{class:"frame-img",src:n.imageUrl,onClick:t[0]||(t[0]=E(()=>v(!0),["stop"]))},null,8,W),(x(),Y(N,{to:"body"},[$(u("div",{id:n.imageUrl,class:"preview-img-mask",onClick:t[1]||(t[1]=E(()=>v(!1),["stop"]))},[u("img",{class:"preview-img",style:F(c.value),src:n.imageUrl},null,12,H)],8,z),[[X,o.value]])]))],64))}},q=U(Q,[["__scopeId","data-v-a4d153bf"]]);export{q as P};
