var B=Object.defineProperty;var M=(s,a,c)=>a in s?B(s,a,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[a]=c;var o=(s,a,c)=>(M(s,typeof a!="symbol"?a+"":a,c),c);import{_ as T,h as r,C as U,o as b,c as $,m as y,a2 as k,b as F,a6 as N,a7 as O,Q as W,a8 as q,F as z}from"./framework.CGDvBAlC.js";const H=["src"],Q=["id"],V=["src"],j={__name:"PreviewImage",props:{imageUrl:String},setup(s){const a=s,c=r(!1),p=e=>{const t=document.getElementsByTagName("body")[0];e?(t.style.height="100vh",t.style.overflow="hidden",X()):(t.style.height="unset",t.style.overflow="auto"),c.value=e};class w{constructor(){o(this,"scale",1);o(this,"left","50%");o(this,"top","50%");o(this,"translate","")}}const l=r(new w),L=e=>{const{deltaY:t}=e;let{scale:n}=l.value;t>0?(n-=.2,n<.2&&(n=.2)):t<0&&(n+=.2),l.value.scale=n};class x{constructor(){o(this,"x",0);o(this,"y",0)}}class h{constructor(){o(this,"x",document.body.clientWidth/2);o(this,"y",document.body.clientHeight/2)}}const v=r(new x),i=r(new h),E=(e,t)=>{v.value.x=e,v.value.y=t},D=(e,t)=>{const{x:n,y:u}=v.value;l.value.translate=`${e-n}px ${t-u}px`},g=(e,t)=>{S(e,t),l.value.translate=""},S=(e,t)=>{i.value.x=i.value.x-v.value.x+e,i.value.y=i.value.y-v.value.y+t,l.value.left=`${i.value.x}px`,l.value.top=`${i.value.y}px`},X=()=>{v.value=new x,i.value=new h,l.value=new w,f.value=!0,d.value=new h,m.value=0};let f=r(!0),d=r(new h),m=r(0);const C=e=>{if(e.touches.length===1){const{clientX:t,clientY:n}=e.touches[0];f.value||g(d.value.x,d.value.y),f.value=!1,E(t,n),console.log("one touch start",t,n)}e.touches.length===2&&(m.value=P(e.touches[0],e.touches[1]))},I=e=>{if(e.preventDefault(),e.touches.length===1){const{clientX:t,clientY:n}=e.touches[0];D(t,n),d.value.x=t,d.value.y=n,console.log("one touch move",t,n)}if(e.touches.length===2){const t=P(e.touches[0],e.touches[1]),n=t/m.value;l.value.scale*=n,m.value=t}},_=e=>{if(e.touches.length===1){const{clientX:t,clientY:n}=e.touches[0];g(t,n),console.log("one touch end",t,n)}if(e.touches.length===2){const t=e.touches[0],n=e.touches[1],u=(t.clientX+n.clientX)/2,Y=(t.clientY+n.clientY)/2;g(u,Y),console.log("two touch end",u,Y)}},P=(e,t)=>{const n=e.clientX-t.clientX,u=e.clientY-t.clientY;return Math.sqrt(n*n+u*u)};return U(()=>{const e=document.getElementById(a.imageUrl);e.addEventListener("wheel",L),e.addEventListener("dragstart",({clientX:t,clientY:n})=>E(t,n)),e.addEventListener("drag",({clientX:t,clientY:n})=>D(t,n)),e.addEventListener("dragend",({clientX:t,clientY:n})=>g(t,n)),e.addEventListener("dragover",t=>t.preventDefault()),e.addEventListener("touchstart",C,{passive:!1}),e.addEventListener("touchmove",I,{passive:!1}),e.addEventListener("touchend",_,{passive:!1})}),(e,t)=>(b(),$(z,null,[y("img",{class:"frame-img",src:s.imageUrl,onClick:t[0]||(t[0]=k(()=>p(!0),["stop"]))},null,8,H),(b(),F(q,{to:"body"},[N(y("div",{id:s.imageUrl,class:"preview-img-mask",onClick:t[1]||(t[1]=k(()=>p(!1),["stop"]))},[y("img",{class:"preview-img",style:W(l.value),src:s.imageUrl},null,12,V)],8,Q),[[O,c.value]])]))],64))}},J=T(j,[["__scopeId","data-v-b12bf6ca"]]);export{J as P};
