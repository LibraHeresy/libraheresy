var B=Object.defineProperty;var U=(a,n,o)=>n in a?B(a,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[n]=o;var c=(a,n,o)=>(U(a,typeof n!="symbol"?n+"":n,o),o);import{_ as Y,r as u,C as X,o as h,c as m,m as g,a2 as S,t as $,e as F,a6 as N,a7 as O,Q as W,a8 as q,F as z}from"./framework.vWBS9OHw.js";import{d as H}from"./theme.DVxbe0EW.js";const Q=["src"],V={key:0,class:"frame-img-desc"},j={key:1,class:"mb"},A=["id"],G=["src"],J={__name:"PreviewImage",props:{imageUrl:String,desc:String},setup(a){const n=a,o=u(!1),y=e=>{const t=document.getElementsByTagName("body")[0];e?(t.style.height="100vh",t.style.overflow="hidden",T()):(t.style.height="unset",t.style.overflow="auto"),o.value=e};class f{constructor(){c(this,"scale",1);c(this,"left","50%");c(this,"top","50%");c(this,"translate","")}}const l=u(new f),L=e=>{const{deltaY:t}=e;let{scale:s}=l.value;t>0?(s-=.2,s<.2&&(s=.2)):t<0&&(s+=.2),l.value.scale=s};class p{constructor(){c(this,"x",0);c(this,"y",0)}}class w{constructor(){c(this,"x",document.body.clientWidth/2);c(this,"y",document.body.clientHeight/2)}}const d=u(new p),i=u(new w),x=e=>{const{clientX:t,clientY:s}=e;d.value.x=t,d.value.y=s},E=e=>{const{clientX:t,clientY:s}=e;P(t,s),l.value.translate=""},D=e=>{const{clientX:t,clientY:s}=e,{x:v,y:_}=d.value;l.value.translate=`${t-v}px ${s-_}px`},P=(e,t)=>{i.value.x=i.value.x-d.value.x+e,i.value.y=i.value.y-d.value.y+t,l.value.left=`${i.value.x}px`,l.value.top=`${i.value.y}px`},T=()=>{d.value=new p,i.value=new w,l.value=new f},r=u(0),b=e=>{e.touches.length===1&&(x(e.touches[0]),r.value=0),e.touches.length===2&&(r.value=k(e.touches[0],e.touches[1]))},C=e=>{if(e.preventDefault(),e.touches.length===1&&D(e.touches[0]),e.touches.length===2){const t=k(e.touches[0],e.touches[1]),s=t/r.value;l.value.scale*=s,r.value=t}},I=e=>{e.changedTouches.length===1&&!r.value&&E(e.changedTouches[0])},k=(e,t)=>{const s=e.clientX-t.clientX,v=e.clientY-t.clientY;return Math.sqrt(s*s+v*v)},M=H();return X(()=>{const e=document.getElementById(n.imageUrl);M.value?(e.addEventListener("touchstart",b),e.addEventListener("touchmove",C),e.addEventListener("touchend",I)):(e.addEventListener("wheel",L),e.addEventListener("dragstart",x),e.addEventListener("drag",D),e.addEventListener("dragend",E),e.addEventListener("dragover",t=>t.preventDefault()))}),(e,t)=>(h(),m(z,null,[g("div",null,[g("img",{class:"frame-img",src:a.imageUrl,onClick:t[0]||(t[0]=S(()=>y(!0),["stop"]))},null,8,Q),a.desc?(h(),m("div",V,$(a.desc),1)):(h(),m("div",j))]),(h(),F(q,{to:"body"},[N(g("div",{id:a.imageUrl,class:"preview-img-mask",onClick:t[1]||(t[1]=S(()=>y(!1),["stop"]))},[g("img",{class:"preview-img",style:W(l.value),src:a.imageUrl},null,12,G)],8,A),[[O,o.value]])]))],64))}},ee=Y(J,[["__scopeId","data-v-ccc28f2a"]]);export{ee as P};
