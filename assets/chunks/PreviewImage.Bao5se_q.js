var b=Object.defineProperty;var B=(s,n,c)=>n in s?b(s,n,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[n]=c;var o=(s,n,c)=>(B(s,typeof n!="symbol"?n+"":n,c),c);import{_ as M,h as u,C as U,o as L,c as Y,m as h,a2 as P,b as X,a6 as $,a7 as F,Q as N,a8 as O,F as W}from"./framework.CGDvBAlC.js";const q=["src"],z=["id"],H=["src"],Q={__name:"PreviewImage",props:{imageUrl:String},setup(s){const n=s,c=u(!1),m=e=>{const t=document.getElementsByTagName("body")[0];e?(t.style.height="100vh",t.style.overflow="hidden",C()):(t.style.height="unset",t.style.overflow="auto"),c.value=e};class p{constructor(){o(this,"scale",1);o(this,"left","50%");o(this,"top","50%");o(this,"translate","")}}const l=u(new p),S=e=>{const{deltaY:t}=e;let{scale:a}=l.value;t>0?(a-=.2,a<.2&&(a=.2)):t<0&&(a+=.2),l.value.scale=a};class f{constructor(){o(this,"x",0);o(this,"y",0)}}class y{constructor(){o(this,"x",document.body.clientWidth/2);o(this,"y",document.body.clientHeight/2)}}const r=u(new f),i=u(new y),w=(e,t)=>{r.value.x=e,r.value.y=t},x=(e,t)=>{const{x:a,y:d}=r.value;l.value.translate=`${e-a}px ${t-d}px`},E=(e,t)=>{T(e,t),l.value.translate=""},T=(e,t)=>{i.value.x=i.value.x-r.value.x+e,i.value.y=i.value.y-r.value.y+t,l.value.left=`${i.value.x}px`,l.value.top=`${i.value.y}px`},C=()=>{r.value=new f,i.value=new y,l.value=new p},v=u(0),I=e=>{if(e.touches.length===1){const{pageX:t,pageY:a}=e.touches[0];w(t,a)}e.touches.length===2&&(v.value=k(e.touches[0],e.touches[1]))};let g=u(null);const _=e=>{if(e.preventDefault(),e.touches.length===1){const{pageX:t,pageY:a}=e.touches[0];x(t,a),g&&clearTimeout(g),g=setTimeout(()=>{D(e)},200)}if(e.touches.length===2){const t=k(e.touches[0],e.touches[1]),a=t/v.value;l.value.scale*=a,v.value=t}},D=e=>{if(e.touches.length===1){const{pageX:t,pageY:a}=e.touches[0];E(t,a)}},k=(e,t)=>{const a=e.pageX-t.pageX,d=e.pageY-t.pageY;return Math.sqrt(a*a+d*d)};return U(()=>{const e=document.getElementById(n.imageUrl);e.addEventListener("wheel",S),e.addEventListener("dragstart",({clientX:t,clientY:a})=>w(t,a)),e.addEventListener("drag",({clientX:t,clientY:a})=>x(t,a)),e.addEventListener("dragend",({clientX:t,clientY:a})=>E(t,a)),e.addEventListener("dragover",t=>t.preventDefault()),e.addEventListener("touchstart",I),e.addEventListener("touchmove",_),e.addEventListener("touchend",D)}),(e,t)=>(L(),Y(W,null,[h("img",{class:"frame-img",src:s.imageUrl,onClick:t[0]||(t[0]=P(()=>m(!0),["stop"]))},null,8,q),(L(),X(O,{to:"body"},[$(h("div",{id:s.imageUrl,class:"preview-img-mask",onClick:t[1]||(t[1]=P(()=>m(!1),["stop"]))},[h("img",{class:"preview-img",style:N(l.value),src:s.imageUrl},null,12,H)],8,z),[[F,c.value]])]))],64))}},A=M(Q,[["__scopeId","data-v-a482f6d8"]]);export{A as P};
